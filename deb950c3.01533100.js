(window.webpackJsonp=window.webpackJsonp||[]).push([[318],{442:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return s})),n.d(t,"rightToc",(function(){return c})),n.d(t,"default",(function(){return l}));var a=n(1),o=n(9),r=(n(0),n(489)),i={id:"use-navigation-state",title:"useNavigationState",sidebar_label:"useNavigationState"},s={id:"version-5.x/use-navigation-state",title:"useNavigationState",description:"`useNavigationState` is a hook which gives access to the navigation state of the navigator which contains the screen. It's useful in rare cases where you want to render something based on the navigation state.",source:"@site/versioned_docs/version-5.x/use-navigation-state.md",permalink:"/docs/use-navigation-state",editUrl:"https://github.com/react-navigation/react-navigation.github.io/edit/source/versioned_docs/version-5.x/use-navigation-state.md",version:"5.x",sidebar_label:"useNavigationState",sidebar:"version-5.x/docs",previous:{title:"useRoute",permalink:"/docs/use-route"},next:{title:"useFocusEffect",permalink:"/docs/use-focus-effect"}},c=[{value:"How is <code>useNavigationState</code> different from <code>navigation.dangerouslyGetState()</code>?",id:"how-is-usenavigationstate-different-from-navigationdangerouslygetstate",children:[]},{value:"Using with class component",id:"using-with-class-component",children:[]}],u={rightToc:c};function l(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(r.b)("wrapper",Object(a.a)({},u,n,{components:t,mdxType:"MDXLayout"}),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"useNavigationState")," is a hook which gives access to the navigation state of the navigator which contains the screen. It's useful in rare cases where you want to render something based on the navigation state."),Object(r.b)("blockquote",null,Object(r.b)("p",{parentName:"blockquote"},"Note: Consider the navigator's state object to be internal and subject to change in a minor release. Avoid using properties from the navigation state object except ",Object(r.b)("inlineCode",{parentName:"p"},"index")," and ",Object(r.b)("inlineCode",{parentName:"p"},"routes"),", unless you really need it. If there is some functionality you cannot achieve without relying on the structure of the state object, please open an issue.")),Object(r.b)("p",null,"It takes a selector function as an argument. The selector will receive the full navigation state and can return a specific value from the state:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"const index = useNavigationState(state => state.index);\n")),Object(r.b)("p",null,"The selector function helps to reduce unnecessary re-renders, so your screen will re-render only when that's something you care about. If you actually need the whole state object, you can do this explicitly:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"const state = useNavigationState(state => state);\n")),Object(r.b)("blockquote",null,Object(r.b)("p",{parentName:"blockquote"},"Note: This hook is useful for advanced cases and it's easy to introduce performance issues if you're not careful. For most of the cases, you don't need the navigator's state.")),Object(r.b)("h2",{id:"how-is-usenavigationstate-different-from-navigationdangerouslygetstate"},"How is ",Object(r.b)("inlineCode",{parentName:"h2"},"useNavigationState")," different from ",Object(r.b)("inlineCode",{parentName:"h2"},"navigation.dangerouslyGetState()"),"?"),Object(r.b)("p",null,"The ",Object(r.b)("inlineCode",{parentName:"p"},"navigation.dangerouslyGetState()")," function also returns the current navigation state. The main difference is that the ",Object(r.b)("inlineCode",{parentName:"p"},"useNavigationState")," hook will trigger a re-render when values change, while ",Object(r.b)("inlineCode",{parentName:"p"},"navigation.dangerouslyGetState()")," won't. For example, the following code will be incorrect:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"function Profile() {\n  const routesLength = navigation.dangerouslyGetState().routes.length; // Don't do this\n\n  return <Text>Number of routes: {routesLength}</Text>;\n}\n")),Object(r.b)("p",null,"In this example, even if you push a new screen, this text won't update. If you use the hook, it'll work as expected:"),Object(r.b)("samp",{id:"use-navigation-state"}),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"function Profile() {\n  const routesLength = useNavigationState(state => state.routes.length);\n\n  return <Text>Number of routes: {routesLength}</Text>;\n}\n")),Object(r.b)("p",null,"So when do you use ",Object(r.b)("inlineCode",{parentName:"p"},"navigation.dangerouslyGetState()"),"? It's mostly useful within event listeners where you don't care about what's rendered. In most cases, using the hook should be preferred."),Object(r.b)("h2",{id:"using-with-class-component"},"Using with class component"),Object(r.b)("p",null,"You can wrap your class component in a function component to use the hook:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"class Profile extends React.Component {\n  render() {\n    // Get it from props\n    const { routesLength } = this.props;\n  }\n}\n\n// Wrap and export\nexport default function(props) {\n  const routesLength = useNavigationState(state => state.routes.length);\n\n  return <Profile {...props} routesLength={routesLength} />;\n}\n")))}l.isMDXComponent=!0},489:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return g}));var a=n(0),o=n.n(a);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var u=o.a.createContext({}),l=function(e){var t=o.a.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):s({},t,{},e)),n},p=function(e){var t=l(e.components);return o.a.createElement(u.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},d=Object(a.forwardRef)((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,i=e.parentName,u=c(e,["components","mdxType","originalType","parentName"]),p=l(n),d=a,g=p["".concat(i,".").concat(d)]||p[d]||b[d]||r;return n?o.a.createElement(g,s({ref:t},u,{components:n})):o.a.createElement(g,s({ref:t},u))}));function g(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,i=new Array(r);i[0]=d;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:a,i[1]=s;for(var u=2;u<r;u++)i[u]=n[u];return o.a.createElement.apply(null,i)}return o.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"}}]);